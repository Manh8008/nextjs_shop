(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{9960:function(e,s,a){Promise.resolve().then(a.bind(a,1848))},6463:function(e,s,a){"use strict";var t=a(1169);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},1848:function(e,s,a){"use strict";a.r(s);var t=a(7437),n=a(2265),r=a(7138),l=a(6463),o=a(1444),i=a(9401),u=a(1116);s.default=function(){let e=(0,o.I0)(),s=(0,l.useRouter)(),[a,c]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[d,f]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),N=()=>a&&m?null:"Lỗi! Vui l\xf2ng nhập đầy đủ th\xf4ng tin đăng nhập",j=async t=>{t.preventDefault();let n=N();if(n){f(n),p("");return}try{let t=await e((0,i.pH)({email:a,password:m}));(0,u.SI)(t),p("Đăng nhập th\xe0nh c\xf4ng"),f(""),setTimeout(()=>{s.push("/")},1500)}catch(e){f(e.message||"Lỗi! T\xe0i khoản hoặc mật khẩu chưa ch\xednh x\xe1c"),p("")}};return(0,t.jsxs)("div",{className:"main-container",children:[(0,t.jsx)("div",{className:"form-container",children:(0,t.jsxs)("form",{onSubmit:j,className:"form",id:"form-1",children:[(0,t.jsx)("h3",{className:"heading",children:"Đăng nhập"}),d&&(0,t.jsx)("p",{className:"alert alert-danger",children:d}),g&&(0,t.jsx)("p",{className:"alert alert-success",children:g}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,t.jsx)("input",{value:a,onChange:e=>c(e.target.value),id:"email",name:"email",type:"email",placeholder:"Email...",className:"form-control"}),(0,t.jsx)("span",{className:"form-message"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"password",className:"form-label",children:"Mật khẩu"}),(0,t.jsx)("input",{value:m,onChange:e=>h(e.target.value),id:"password",name:"password",type:"password",placeholder:"Mật khẩu...",className:"form-control"}),(0,t.jsx)("span",{className:"form-message"})]}),(0,t.jsxs)("div",{className:"router-page-btn col",children:[(0,t.jsx)("button",{className:"form-submit",type:"submit",children:"Đăng nhập"}),(0,t.jsx)(r.default,{className:"turn-to-page-login",href:"/register",children:"Bạn chưa c\xf3 t\xe0i khoản ?"})]})]})}),(0,t.jsx)("div",{className:"site-bottom"})]})}},9401:function(e,s,a){"use strict";a.d(s,{kS:function(){return o},pH:function(){return n}});var t=a(1116);let n=(0,t.hg)("user/login",async(e,s)=>{let{rejectWithValue:a}=s;try{let s=await fetch("http://localhost:5000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();return a(e.message)}let t=await s.json();return localStorage.setItem("userInfo",JSON.stringify(t)),t}catch(e){return a(e.message)}}),r={userInfo:JSON.parse(localStorage.getItem("userInfo")),loading:!1,error:null},l=(0,t.oM)({name:"user",initialState:r,reducers:{logout:e=>{e.userInfo=null,localStorage.removeItem("userInfo")}},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,s)=>{let{payload:a}=s;console.log(a),e.loading=!1,e.userInfo=a}).addCase(n.rejected,(e,s)=>{let{payload:a}=s;e.loading=!1,e.error=a})}}),{logout:o}=l.actions;s.ZP=l.reducer}},function(e){e.O(0,[7138,1444,1116,2971,7023,1744],function(){return e(e.s=9960)}),_N_E=e.O()}]);