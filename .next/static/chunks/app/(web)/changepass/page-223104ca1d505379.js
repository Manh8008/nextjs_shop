(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5155],{6223:function(e,s,a){Promise.resolve().then(a.bind(a,411))},6463:function(e,s,a){"use strict";var r=a(1169);a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})},411:function(e,s,a){"use strict";a.r(s);var r=a(7437),t=a(6463),o=a(2265);s.default=()=>{let e=(0,t.useRouter)(),[s,a]=(0,o.useState)(""),[n,l]=(0,o.useState)(""),[i,c]=(0,o.useState)(""),[m,u]=(0,o.useState)(""),[d,h]=(0,o.useState)(""),f=async a=>{if(a.preventDefault(),n!==i){u("Mật khẩu mới kh\xf4ng khớp!");return}try{let a=JSON.parse(localStorage.getItem("userInfo")).token,r=await fetch("http://localhost:5000/users/changePassword",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(a)},body:JSON.stringify({oldPassword:s,newPassword:n})}),t=await r.json();r.ok?(h(t.message),u(""),e.push("/info")):(u(t.error),h(""))}catch(e){console.error("Fetch Error:",e),u("C\xf3 lỗi xảy ra. Vui l\xf2ng thử lại!")}};return(0,r.jsxs)("div",{className:"main-container",children:[(0,r.jsx)("div",{className:"form-container",children:(0,r.jsxs)("form",{className:"form",id:"form-1",onSubmit:f,children:[(0,r.jsx)("h3",{className:"heading",children:"Đổi mật khẩu"}),m&&(0,r.jsx)("p",{className:"alert alert-danger",children:m}),d&&(0,r.jsx)("p",{className:"alert alert-success",children:d}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"oldPassword",className:"form-label",children:"Mật khẩu hiện tại"}),(0,r.jsx)("input",{id:"oldPassword",name:"oldPassword",type:"password",className:"form-control",value:s,onChange:e=>a(e.target.value)}),(0,r.jsx)("span",{className:"form-message"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"Mật khẩu mới"}),(0,r.jsx)("input",{id:"newPassword",name:"newPassword",type:"password",className:"form-control",value:n,onChange:e=>l(e.target.value)}),(0,r.jsx)("span",{className:"form-message"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Nhập lại mật khẩu mới"}),(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",className:"form-control",value:i,onChange:e=>c(e.target.value)}),(0,r.jsx)("span",{className:"form-message"})]}),(0,r.jsx)("div",{className:"router-page-btn col",children:(0,r.jsx)("button",{className:"form-submit",type:"submit",children:"Cập nhật"})})]})}),(0,r.jsx)("div",{className:"site-bottom"})]})}}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=6223)}),_N_E=e.O()}]);