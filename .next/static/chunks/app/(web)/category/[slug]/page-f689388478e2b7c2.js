(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5116],{624:function(e,t,s){Promise.resolve().then(s.bind(s,508))},508:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(7437),c=s(6323),r=s(2265);let a=(e,t)=>{let[s,n]=(0,r.useState)([]),[c,a]=(0,r.useState)(!1),[l,i]=(0,r.useState)(1),[o,d]=(0,r.useState)(1),[u,h]=(0,r.useState)("default"),m=(0,r.useRef)([]),p=async function(s){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;try{let r="";"asc"===c||"desc"===c?r="&_sort&column=price&type=".concat(c):"newest"===c?r="&_sort&column=createdAt&type=desc":"views"===c&&(r="&_sort&column=views&type=desc");let l=await fetch("http://localhost:5000/products/category/".concat(e,"?page=").concat(s,"&limit=").concat(t).concat(r));if(!l.ok)throw Error("Mạng kh\xf4ng ổn định !");let i=await l.json();n(i.products),m.current=i.products,d(i.totalPages),a(0===i.products.length)}catch(e){console.error("Lỗi khi t\xecm nạp sản phẩm:",e),a(!0)}};return(0,r.useEffect)(()=>{p(l)},[e,l,t]),{products:s,isDataEmpty:c,currentPage:l,totalPages:o,handleSort:e=>{h(e),p(l,e)},handlePageChange:e=>{i(e)},handleFilter:(e,t)=>{let s=m.current.filter(s=>s.price>=e&&s.price<=t);n(s),a(0===s.length)}}};var l=function(e){let{params:t}=e,{products:s,isDataEmpty:r,currentPage:l,totalPages:i,handleSort:o,handlePageChange:d,handleFilter:u}=a(t.slug,8);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"main-container",children:(0,n.jsx)("div",{className:"grid wide",children:(0,n.jsxs)("div",{className:"grid__row main-content",children:[(0,n.jsx)("div",{className:"grid__column-2",children:(0,n.jsx)(c.jU,{handleFilter:u})}),(0,n.jsxs)("div",{className:"grid__column-10",children:[(0,n.jsx)(c.DV,{handleSort:o,handlePageChange:d,currentPage:l,totalPages:i}),(0,n.jsx)("div",{className:"home-product grid",children:(0,n.jsx)("ul",{className:"products grid__row",children:r?(0,n.jsx)("div",{children:(0,n.jsx)("h4",{className:"text-error",children:"Kh\xf4ng t\xecm thấy sản phẩm ph\xf9 hợp !"})}):s.map(e=>(0,n.jsx)("li",{className:"product-item grid__column-3",children:(0,n.jsx)(c.Il,{product:e})},e._id))})})]})]})})}),(0,n.jsx)("div",{className:"site-bottom"})]})}}},function(e){e.O(0,[4556,4911,9461,7138,1444,1116,5704,6323,2971,7023,1744],function(){return e(e.s=624)}),_N_E=e.O()}]);