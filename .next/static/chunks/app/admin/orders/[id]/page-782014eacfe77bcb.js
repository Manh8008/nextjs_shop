(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2643],{6660:function(e,t,s){Promise.resolve().then(s.bind(s,570))},570:function(e,t,s){"use strict";s.r(t);var a=s(7437);s(3853);var n=s(6323),l=s(2265);t.default=function(e){let{params:t}=e,[s,r]=(0,l.useState)(null),[i,c]=(0,l.useState)("");(0,l.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("http://localhost:5000/orders/".concat(t.id)),s=await e.json();r(s),c(s.status)}catch(e){console.error("Failed to fetch order:",e)}},h=e=>e?e.reduce((e,t)=>e+t.price*t.quantity,0):0,o=async e=>{e.preventDefault();try{let e=await fetch("http://localhost:5000/orders/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:i})});if(e.ok){let t=await e.json();r(t),(0,n.ID)("Trạng th\xe1i đơn h\xe0ng đ\xe3 được cập nhật !","success")}else alert("C\xf3 lỗi xảy ra khi cập nhật trạng th\xe1i đơn h\xe0ng.")}catch(e){console.error("Failed to update status:",e),alert("C\xf3 lỗi xảy ra khi cập nhật trạng th\xe1i đơn h\xe0ng.")}};return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"left",children:(0,a.jsxs)("h2",{className:"order-detail-title",children:["Chi tiết đơn h\xe0ng ",(0,a.jsxs)("span",{style:{color:"red"},children:["#",s._id]})]})}),(0,a.jsxs)("div",{className:"table-data",children:[(0,a.jsxs)("div",{className:"order",children:[(0,a.jsxs)("div",{className:"head",children:[(0,a.jsx)("h3",{children:"Sản phẩm đ\xe3 mua"}),(0,a.jsx)("i",{className:"bx bx-search"}),(0,a.jsx)("i",{className:"bx bx-filter"})]}),(0,a.jsxs)("table",{className:"order-table",children:[(0,a.jsx)("thead",{className:"order-table-header",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"STT"}),(0,a.jsx)("th",{colSpan:"2",children:"T\xean"}),(0,a.jsx)("th",{children:"Size"}),(0,a.jsx)("th",{children:"Gi\xe1 tiền"}),(0,a.jsx)("th",{children:"Số lượng"}),(0,a.jsx)("th",{children:"Th\xe0nh tiền"})]})}),(0,a.jsx)("tbody",{className:"order-table-body",children:s.cart&&s.cart.map((e,t)=>(0,a.jsxs)("tr",{className:"order-table-row",children:[(0,a.jsx)("td",{className:"order-table-cell",children:t+1}),(0,a.jsx)("td",{className:"order-table-cell",children:(0,a.jsx)("img",{src:"".concat("http://localhost:5000/images","/").concat(e.image),alt:e.name,className:"order-product-image"})}),(0,a.jsx)("td",{className:"order-table-cell",children:e.name}),(0,a.jsx)("td",{className:"order-table-cell",children:e.size}),(0,a.jsxs)("td",{className:"order-table-cell",children:[e.price.toLocaleString("vi-VN"),"đ"]}),(0,a.jsx)("td",{className:"order-table-cell",children:e.quantity}),(0,a.jsxs)("td",{className:"order-table-cell",children:[(e.price*e.quantity).toLocaleString("vi-VN"),"đ"]})]},e._id))})]})]}),(0,a.jsxs)("div",{className:"order-detail",children:[(0,a.jsx)("h2",{children:"T\xf3m tắt đơn h\xe0ng"}),(0,a.jsxs)("p",{className:"order-detail-info",children:["Ng\xe0y đặt h\xe0ng: ",new Date(s.createdAt).toLocaleDateString("vi-VN")]}),(0,a.jsxs)("p",{className:"order-detail-info",children:["Thời gian đặt h\xe0ng: ",new Date(s.createdAt).toLocaleTimeString("vi-VN")]}),(0,a.jsxs)("p",{className:"order-detail-info",children:["Tạm t\xednh: ",h(s.cart).toLocaleString("vi-VN"),"đ"]}),(0,a.jsx)("p",{className:"order-detail-info",children:"Ph\xed vận chuyển: 38.000đ"}),(0,a.jsxs)("p",{className:"order-total",children:["Tổng cộng: ",(0,a.jsxs)("span",{style:{color:"red"},children:[(h(s.cart)+38e3).toLocaleString("vi-VN"),"đ"]})]}),(0,a.jsxs)("div",{className:"order-detail-body",children:[(0,a.jsx)("h2",{children:"Chi tiết kh\xe1ch h\xe0ng v\xe0 đơn h\xe0ng"}),(0,a.jsxs)("p",{className:"order-detail-info",children:["T\xean kh\xe1ch h\xe0ng: ",s.username]}),(0,a.jsxs)("p",{className:"order-detail-info",children:["Số điện thoại: ",s.phone]}),(0,a.jsxs)("p",{className:"order-detail-info",children:["Phương thức thanh to\xe1n: ",s.paymentMethod&&"1"===s.paymentMethod?"Thanh to\xe1n khi nhận h\xe0ng":"Thanh to\xe1n Momo"]}),(0,a.jsxs)("div",{className:"flex",style:{display:"flex"},children:[(0,a.jsx)("p",{className:"order-detail-info",children:"Trạng th\xe1i đơn h\xe0ng:"}),(0,a.jsxs)("form",{onSubmit:o,className:"order-status-form",style:{marginTop:-8,marginLeft:12},children:[(0,a.jsxs)("select",{name:"status",id:"order-status",value:i,onChange:e=>{c(e.target.value)},children:[(0,a.jsx)("option",{value:"Pending",children:"Đang chờ xử l\xfd"}),(0,a.jsx)("option",{value:"Processing",children:"Đang xử l\xed"}),(0,a.jsx)("option",{value:"Paid",children:"Đ\xe3 thanh to\xe1n trước"}),(0,a.jsx)("option",{value:"Shipped",children:"Đ\xe3 vận chuyển"}),(0,a.jsx)("option",{value:"Delivered",children:"Đ\xe3 giao h\xe0ng"}),(0,a.jsx)("option",{value:"Canceled",children:"Đ\xe3 hủy"})]}),(0,a.jsx)("button",{type:"submit",className:"update-status-btn",children:"Cập nhật"})]})]})]})]})]})]}):(0,a.jsx)("p",{children:"Đang tải..."})}},3853:function(){}},function(e){e.O(0,[7823,4556,4911,9461,7138,1444,1116,5704,6323,2971,7023,1744],function(){return e(e.s=6660)}),_N_E=e.O()}]);