(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4331],{5141:function(e,t,n){Promise.resolve().then(n.bind(n,4552))},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},4552:function(e,t,n){"use strict";n.r(t);var s=n(7437),c=n(2265),a=n(7138),i=n(814),r=n(4646);t.default=(0,i.Z)(function(){let[e,t]=(0,c.useState)(),[n,i]=(0,c.useState)("");(0,c.useEffect)(()=>{l()},[]);let l=async()=>{let e=await fetch("http://localhost:5000/categories",{cache:"no-store"}),n=await e.json();console.log(n),t(n)},o=async(n,s)=>{if(s.preventDefault(),(await (0,r.Z)("Bạn c\xf3 chắc chắn muốn x\xf3a danh mục n\xe0y kh\xf4ng?","question")).isConfirmed)try{if((await fetch("http://localhost:5000/categories/".concat(n),{method:"DELETE"})).ok)t(e.filter(e=>e._id!==n)),i("X\xf3a danh mục th\xe0nh c\xf4ng");else throw Error("X\xf3a danh mục thất bại")}catch(e){i(e.message)}};return(0,s.jsx)("div",{className:"table-data",children:(0,s.jsxs)("div",{className:"order",children:[n&&(0,s.jsx)("p",{className:"alert alert-success",children:n}),(0,s.jsxs)("div",{className:"head",children:[(0,s.jsx)("h3",{children:"C\xe1c danh mục"}),(0,s.jsx)(a.default,{href:"/admin/categories/add",children:"Th\xeam danh mục"}),(0,s.jsx)("i",{className:"bx bx-search"}),(0,s.jsx)("i",{className:"bx bx-filter"})]}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"T\xean danh mục"}),(0,s.jsx)("th",{children:"Ng\xe0y cập nhật"}),(0,s.jsx)("th",{children:"T\xf9y chọn"})]})}),(0,s.jsx)("tbody",{children:e&&e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsx)("img",{src:"".concat("http://localhost:5000/images","/").concat(e.image)}),(0,s.jsx)("p",{children:e._id.slice(-4)})]}),(0,s.jsx)("td",{children:(0,s.jsx)(a.default,{href:"/admin/categories/parent/".concat(e.slug),children:e.name})}),(0,s.jsx)("td",{children:new Date(e.updatedAt).toLocaleDateString()}),(0,s.jsxs)("td",{children:[(0,s.jsx)(a.default,{className:"edit__router",href:"/admin/categories/update/".concat(e.slug),children:(0,s.jsx)("i",{className:"bx bx-pen"})}),(0,s.jsx)("button",{onClick:t=>o(e._id,t),className:"delete__btn",children:(0,s.jsx)("i",{className:"bx bx-trash"})})]})]},e._id))})]})]})})})},4646:function(e,t,n){"use strict";var s=n(4379),c=n.n(s);n(8865),n(8801),t.Z=(e,t)=>c().fire({title:e,icon:t,showCancelButton:!0,confirmButtonText:"ĐỒNG \xdd",cancelButtonText:"QUAY LẠI",customClass:{title:"custom-alert-title",confirmButton:"custom-confirm-button",cancelButton:"custom-cancel-button"}})},814:function(e,t,n){"use strict";var s=n(7437),c=n(6463),a=n(2265),i=n(1444);t.Z=e=>t=>{let n=(0,c.useRouter)(),r=(0,i.v9)(e=>e.user.userInfo);return((0,a.useEffect)(()=>{r&&"admin"===r.role||n.push("/")},[r,n]),r&&"admin"===r.role)?(0,s.jsx)(e,{...t}):null}},8801:function(){},8865:function(){}},function(e){e.O(0,[4911,9461,7138,1444,2971,7023,1744],function(){return e(e.s=5141)}),_N_E=e.O()}]);