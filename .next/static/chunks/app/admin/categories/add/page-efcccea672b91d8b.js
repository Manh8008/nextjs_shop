(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8798],{3322:function(e,a,s){Promise.resolve().then(s.bind(s,1104))},6463:function(e,a,s){"use strict";var n=s(1169);s.o(n,"usePathname")&&s.d(a,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(a,{useRouter:function(){return n.useRouter}})},1104:function(e,a,s){"use strict";s.r(a);var n=s(7437),t=s(2265),r=s(9381),i=s(4245),l=s(6463),c=s(814);let o=i.Ry({name:i.Z_().required("T\xean sản phẩm l\xe0 bắt buộc"),description:i.Z_().required("Mi\xeau tả l\xe0 bắt buộc"),parent:i.Z_().nullable()});a.default=(0,c.Z)(function(){let e=(0,l.useRouter)(),[a,s]=(0,t.useState)(""),[i,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(null),[h,m]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:5000/categories"),a=await e.json();c(a)}catch(e){console.error("Failed to fetch categories:",e)}})()},[]);let p=(0,r.TA)({initialValues:{name:"",description:"",image:null,parent:""},validationSchema:o,onSubmit:async a=>{s("");try{let n=new FormData;n.append("name",a.name),n.append("description",a.description),n.append("parent",a.parent),a.image&&n.append("image",a.image);let t=await fetch("http://localhost:5000/categories/create",{method:"POST",body:n});if(!t.ok)throw Error("Mạng kh\xf4ng ổn định");await t.json(),s("Th\xeam sản phẩm th\xe0nh c\xf4ng!"),setTimeout(()=>{e.push("/admin/categories")},1500)}catch(e){s(e.message)}}});return(0,n.jsx)("div",{className:"table-data",children:(0,n.jsxs)("div",{id:"check-out",children:[a&&(0,n.jsx)("p",{className:"alert alert-success",children:a}),(0,n.jsx)("div",{className:"container_form-checkout",children:(0,n.jsxs)("form",{onSubmit:p.handleSubmit,children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("h3",{className:"title",children:"Th\xeam danh mục"}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"T\xean danh mục:"}),(0,n.jsx)("input",{type:"text",placeholder:"Nhập t\xean sản phẩm...",name:"name",value:p.values.name,onChange:p.handleChange,onBlur:p.handleBlur}),p.touched.name&&p.errors.name?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",p.errors.name]}):null]}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"H\xecnh ảnh :"}),(0,n.jsx)("input",{name:"image",type:"file",onChange:e=>{p.setFieldValue("image",e.currentTarget.files[0])}}),p.touched.image&&p.errors.image?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",p.errors.image]}):null]})]}),(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("h3",{className:"title",children:"-----"}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Mi\xeau tả :"}),(0,n.jsx)("textarea",{name:"description",cols:"68",rows:"5",placeholder:"Nhập mi\xeau tả...",value:p.values.description,onChange:p.handleChange,onBlur:p.handleBlur}),p.touched.description&&p.errors.description?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",p.errors.description]}):null]}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Danh mục cha:"}),(0,n.jsxs)("select",{name:"parent",value:p.values.parent,onChange:e=>{let a=e.target.value;p.setFieldValue("parent",a),d(i.find(e=>e._id===a)||null),m("")},onBlur:p.handleBlur,children:[(0,n.jsx)("option",{value:"",children:"Chọn danh mục cha"}),i.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))]}),p.touched.parent&&p.errors.parent?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",p.errors.parent]}):null]}),u&&u.subcategories.length>0&&(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Danh mục con:"}),(0,n.jsxs)("select",{name:"subParent",value:h,onChange:e=>{let a=e.target.value;p.setFieldValue("parent",a),m(a)},children:[(0,n.jsx)("option",{value:"",children:"Chọn danh mục con"}),u.subcategories.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]})]}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",children:"Th\xeam"})]})})]})})})},814:function(e,a,s){"use strict";var n=s(7437),t=s(6463),r=s(2265),i=s(1444);a.Z=e=>a=>{let s=(0,t.useRouter)(),l=(0,i.v9)(e=>e.user.userInfo);return((0,r.useEffect)(()=>{l&&"admin"===l.role||s.push("/")},[l,s]),l&&"admin"===l.role)?(0,n.jsx)(e,{...a}):null}}},function(e){e.O(0,[1444,4349,2971,7023,1744],function(){return e(e.s=3322)}),_N_E=e.O()}]);