(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1512],{3377:function(e,s,a){Promise.resolve().then(a.bind(a,7690))},6463:function(e,s,a){"use strict";var n=a(1169);a.o(n,"usePathname")&&a.d(s,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(s,{useRouter:function(){return n.useRouter}})},7690:function(e,s,a){"use strict";a.r(s),a.d(s,{validationSchema:function(){return c}});var n=a(7437),i=a(2265),r=a(9381),l=a(4245),t=a(6463);let c=l.Ry({name:l.Z_().required("T\xean sản phẩm l\xe0 bắt buộc"),description:l.Z_().required("Mi\xeau tả l\xe0 bắt buộc"),price:l.Rx().required("Gi\xe1 l\xe0 bắt buộc").positive("Gi\xe1 phải lớn hơn 0"),categorySlug:l.Z_().required("Danh mục l\xe0 bắt buộc"),quantity:l.Rx().required("Số lượng l\xe0 bắt buộc").positive("Số lượng phải lớn hơn 0").integer("Số lượng phải l\xe0 số nguy\xean"),image:l.nK().required("H\xecnh ảnh l\xe0 bắt buộc").test("fileFormat","Định dạng ảnh kh\xf4ng hợp lệ",e=>e&&["image/jpeg","image/png","image/gif","image/webp"].includes(e.type))});s.default=function(){let e=(0,t.useRouter)(),[s,a]=(0,i.useState)(""),[l,o]=(0,i.useState)([]),[u,h]=(0,i.useState)(""),d=(0,r.TA)({initialValues:{name:"",description:"",price:"",isNew:!1,isOnSale:!1,image:null,categorySlug:"",quantity:""},validationSchema:c,onSubmit:async s=>{a("");try{let n=new FormData;for(let e in s)n.append(e,s[e]);let i=await fetch("http://localhost:5000/products/create",{method:"POST",body:n});if(!i.ok)throw Error("Mạng kh\xf4ng ổn định");await i.json(),a("Th\xeam sản phẩm th\xe0nh c\xf4ng!"),setTimeout(()=>{e.push("/admin/products")},1500)}catch(e){a(e.message)}}}),m=(0,i.useCallback)(async()=>{try{let e=await fetch("http://localhost:5000/categories"),s=await e.json();o(s)}catch(e){console.error("Error fetching categories:",e)}},[]);(0,i.useEffect)(()=>{m()},[m]);let p=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>(0,n.jsxs)(i.Fragment,{children:[(0,n.jsxs)("option",{value:e.slug,children:["-".repeat(s)," ",e.name]}),e.subcategories&&p(e.subcategories,s+1)]},e._id))};return(0,n.jsx)("div",{className:"table-data",children:(0,n.jsxs)("div",{id:"check-out",children:[s&&(0,n.jsx)("p",{className:"alert alert-success",children:s}),(0,n.jsx)("div",{className:"container_form-checkout",children:(0,n.jsxs)("form",{onSubmit:d.handleSubmit,children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("h3",{className:"title",children:"Th\xeam sản phẩm"}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"T\xean sản phẩm:"}),(0,n.jsx)("input",{type:"text",placeholder:"Nhập t\xean sản phẩm...",name:"name",value:d.values.name,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.name&&d.errors.name?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",d.errors.name]}):null]}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Gi\xe1 :"}),(0,n.jsx)("input",{name:"price",type:"text",placeholder:"Nhập gi\xe1...",value:d.values.price,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.price&&d.errors.price?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",d.errors.price]}):null]}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Số lượng :"}),(0,n.jsx)("input",{type:"number",name:"quantity",placeholder:"Nhập số lượng...",value:d.values.quantity,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.quantity&&d.errors.quantity?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"}),d.errors.quantity]}):null]})})]}),(0,n.jsxs)("div",{className:"col",children:[(0,n.jsx)("h3",{className:"title",children:"-----"}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Danh mục :"}),(0,n.jsxs)("select",{name:"categorySlug",value:d.values.categorySlug,onChange:d.handleChange,onBlur:d.handleBlur,children:[(0,n.jsx)("option",{value:"",children:"Chọn danh mục"}),p(l)]}),d.touched.categorySlug&&d.errors.categorySlug?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",d.errors.categorySlug]}):null]}),(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("span",{children:"Mi\xeau tả :"}),(0,n.jsx)("textarea",{name:"description",cols:"68",rows:"5",placeholder:"Nhập mi\xeau tả...",value:d.values.description,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.description&&d.errors.description?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",d.errors.description]}):null]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsxs)("div",{className:"inputBox",children:[(0,n.jsx)("input",{name:"image",type:"file",onChange:e=>{d.setFieldValue("image",e.currentTarget.files[0]),h(e.currentTarget.files[0].name)}}),d.touched.image&&d.errors.image?(0,n.jsxs)("div",{className:"error-msg",children:[(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})," ",d.errors.image]}):null]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"H\xecnh ảnh"}),u&&(0,n.jsx)("div",{className:"current-image",children:(0,n.jsx)("img",{src:"".concat("http://localhost:5000/images","/").concat(u),alt:"H\xecnh ảnh sản phẩm",style:{width:100,height:150}})})]})]})]})]}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",children:"Th\xeam"})]})})]})})}}},function(e){e.O(0,[4349,2971,7023,1744],function(){return e(e.s=3377)}),_N_E=e.O()}]);